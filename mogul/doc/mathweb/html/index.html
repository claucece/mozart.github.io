<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
<HEAD>
<!-- EDIT -->
<TITLE>Support for HTML Generator Objects</TITLE>
<STYLE>
BODY {
	background-color: white;
	margin-left	: 2cm;
	margin-right	: 2cm;
	font-family	: tahoma,arial,helvetica,sans-serif;
}
H1 {
	text-align	: center;
	color		: #9B0000;
}
H2 {	color		: #FF9933; }
H4 {	color		: slateblue; }
H3 {	color		: #881155; }
H5 {	color		: darkslateblue; }
CODE {	color		: #663366; }
CODE,TT {
	font-family	: "lucida console",courier,monospace;
}
CODE.DISPLAY {
	display		: block;
	white-space	: pre;
	margin-left	: 2cm;
	margin-top	: 1em;
	margin-bottom	: 1em;
}
P.AUTHOR {
	text-align	: center;
	font-weight	: bold;
}
SPAN.MODULE {
	color		: steelblue;
}
A {	color		: steelblue; }
SPAN.COMMENT      { color: #B22222; }
SPAN.KEYWORD      { color: #A020F0; }
SPAN.STRING       { color: #BC8F8F; }
SPAN.FUNCTIONNAME { color: #0000FF; }
SPAN.TYPE         { color: #228B22; }
SPAN.VARIABLENAME { color: #B8860B; }
SPAN.REFERENCE    { color: #5F9EA0; }
SPAN.BUILTIN      { color: #DA70D6; }
</STYLE>
</HEAD>
<BODY>
<!-- EDIT -->
<H1>Support for HTML Generator Objects</H1>
<P CLASS="AUTHOR">
  <A HREF="http://ags.uni-sb.de/~afranke/">Andreas Franke</A>
</P>
<DL>
  <DT><B>provides</B>
  <DD><SPAN CLASS="MODULE">x-ozlib://mathweb/html/Buffered.ozf</SPAN>
  <DD><SPAN CLASS="MODULE">x-ozlib://mathweb/html/Html.ozf</SPAN>
</DL>
<HR>

<H2>Purpose</H2>
<P>The module <code>Buffered</code> provides buffered versions of
   <code>Open.file</code>, <code>Open.socket</code> and 
   <code>Open.pipe</code>. The <code>write(vs:VS)</code> method 
   appends <code>VS</code> to an internal buffer. A method
   <code>flushBuffer</code> is provided that causes the buffer's
   content to be flushed via <code>Open.xyz, write(...)</code>.
   The <code>flushBuffer</code> method is automatically triggered by
   <ul>
   <li><code>{File close}</code>
   <li><code>{Socket shutDown(...)}</code>
   <li><code>{Pipe close(...)}</code>
   </ul>
   Additionally, the methods <code>push</code> and <code>pop($)</code>
   allow for nesting buffers.
<P><code>Html.'class'</code> provides a <code>tag</code> method
   similar to <code>Open.html</code> (I just copied the code
   from <code>Open.html</code> and modified/extended it). 
   The main difference is that in this version each tag is written
   via <code>{self write(vs:...)}</code> instead of first generating
   one virtual string and writing it in one go.
   Together with classes like <code>Buffered.file</code>, however, the 
   advantage of concatenation is back again, it happens just somewhere else.   
   (In principle, it is possible to use this class together with the original
   classes <code>Open.file</code> etc., but this may be very slow.)
   <br>
   So why are we doing all this?
   The main new feature of this aproach is that it allows for method calls
   somewhere deep down in the argument of <code>tag(...)</code>. See 
   Html.document for a demo application.
<P>
   To view the interface documentation generated by ozh, click 
   <a href="API/index.html">here</a>.
<P>
<H2>Example</H2>
<P> 
<code>
<pre>
class MyHtml from Html.'class'

   meth writeTitle
      {self write(vs:"Oh, Happy Day... :-)")}
   end
   meth writeHtml(Content)}
      {self tag(html(head(title('self'(writeTitle)))
                     body(h1('self'(writeTitle))#Content)))}
   end

end
</pre>
</code>
<P>
<H2>Installation</H2>
<P>This package can be installed by following the usual
<I>configure, build, install</I> procedure, i.e. by executing a the
shell:
<CODE CLASS="DISPLAY">./configure
make install</CODE>
By default, all files of the package are
installed in the user's <TT>~/.oz</TT> directory tree.  In
particular, all modules are installed in the user's private cache.

<HR>
<ADDRESS>
<A HREF="http://www.ags.uni-sb.de/~afranke/">Andreas Franke</A>
</ADDRESS>
</BODY>
</HTML>
