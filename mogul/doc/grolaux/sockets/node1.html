<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>2 SocketConnection Module</TITLE><LINK href="ozdoc.css" rel="stylesheet" type="text/css"></HEAD><BODY><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="index.html">- Up -</A></TD><TD><A href="node2.html#chapter.iport">Next &gt;&gt;</A></TD></TR></TABLE><DIV id="chapter.connection"><H1><A name="chapter.connection">2 SocketConnection Module</A></H1><P>The <CODE>SocketConnection</CODE> module provides the same functionality as the <CODE>Connection</CODE> module, through a socket instead of a ticket.</P><DIV id="section.connection.introduction"><H2><A name="section.connection.introduction">2.1 Introduction</A></H2><P> The <CODE>SocketConnection</CODE> module provides a socket-based mechanism to establish connections between independent Oz processes. One process (called <EM>server</EM>) opens a socket with which other sites (called <EM>clients</EM>) can connect to establish a connection. </P><P> Two different types of socket connections are supported: </P><DL><DT><EM>One-to-one connections</EM>. </DT><DD><P>Allow to establish a single connection only. </P></DD><DT><EM>Many-to-one connections</EM>. </DT><DD><P>Allow multiple connections with the same socket to the same value. Values for many-to-one connections are offered through gates. </P></DD></DL><P> </P><P> The module <A name="label1"></A><SPAN class="index"><CODE>SocketConnection</CODE></SPAN> provides procedures and classes that support both one-to-one and many-to-one connections. </P><P> </P></DIV><DIV id="section.connection.single"><H2><A name="section.connection.single">2.2 One-to-one Connections</A></H2><P> </P><DL><DT><A name="label2"></A><SPAN class="index"><CODE>offer</CODE></SPAN> <A name="label3"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>{SocketConnection<SPAN class="keyword">.</SPAN>offer&nbsp;</CODE><CODE><I>X</I></CODE><CODE>&nbsp;</CODE><CODE>?<I>SocketN</I></CODE><CODE>}</CODE> </P></BLOCKQUOTE></DD><DD><P>Opens a random free socket under which the value <CODE><I>X</I></CODE> is offered. <CODE><I>SocketN</I></CODE> is bound to the number of the socket used. </P><P> The value <CODE><I>X</I></CODE> is exported immediately. An exception is raised, if exportation of <CODE><I>X</I></CODE> fails, because <CODE><I>X</I></CODE> refers to sited entities. </P></DD><DT><A name="label4"></A><SPAN class="index"><CODE>offerOn</CODE></SPAN> <A name="label5"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>{SocketConnection<SPAN class="keyword">.</SPAN>offerOn&nbsp;</CODE><CODE><I>X</I></CODE><CODE>&nbsp;</CODE><CODE><I>SocketN</I></CODE><CODE>}</CODE> </P></BLOCKQUOTE></DD><DD><P>Opens the socket <CODE><I>SocketN</I></CODE> (an integer) under which the value <CODE><I>X</I></CODE> is offered. </P><P> The value <CODE><I>X</I></CODE> is exported immediately. An exception is raised, if exportation of <CODE><I>X</I></CODE> fails, because <CODE><I>X</I></CODE> refers to sited entities. </P><P> Raises an exception if the socket <CODE><I>SocketN</I></CODE> is already in use. </P></DD><DT><A name="label6"></A><SPAN class="index"><CODE>take</CODE></SPAN> <A name="label7"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>{Connection<SPAN class="keyword">.</SPAN>take&nbsp;</CODE><CODE><I>IP</I></CODE><CODE>&nbsp;</CODE><CODE><I>SocketN</I></CODE><CODE>&nbsp;</CODE><CODE>?<I>X</I></CODE><CODE>}</CODE> </P></BLOCKQUOTE></DD><DD><P>Returns the value <CODE><I>X</I></CODE> offered under the socket <CODE><I>SocketN</I></CODE> (an integer) of the computer whose IP adress is the virtual string <CODE><I>IP</I></CODE>. </P><P> Waits until the connection to the offering process is established and has been acknowledged by the other process. </P><P> Raises an exception if the socket is illegal, or if the offering process does not longer exist. </P><P> Also works for many-shot sockets, where an exception might be raised if the same socket is used more than once. </P></DD></DL><P> </P></DIV><DIV id="section.connection.many"><H2><A name="section.connection.many">2.3 Many-to-one Connections</A></H2><P> Values for many-to-one connections can be offered through <EM>gates</EM>. Values offered through gates can be taken with <A name="label8"></A><SPAN class="index"><CODE>SocketConnection<SPAN class="keyword">.</SPAN>take</CODE></SPAN> as described for one-to-one connections. Gates can be closed which implies that the associated socket is closed. </P><P> The special case and frequently occuring case that the gate never gets closed is supported by the procedure <CODE>SocketConnection<SPAN class="keyword">.</SPAN>offerUnlimited</CODE> which is as follows: </P><P> </P><DL><DT><A name="label9"></A><SPAN class="index"><CODE>offerUnlimited</CODE></SPAN> <A name="label10"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>{SocketConnection<SPAN class="keyword">.</SPAN>offerUnlimited&nbsp;</CODE><CODE><I>X</I></CODE><CODE>&nbsp;</CODE><CODE>?<I>SocketN</I></CODE><CODE>}</CODE> </P></BLOCKQUOTE></DD><DD><P>Opens a random free socket under which the value <CODE><I>X</I></CODE> is offered many times. <CODE><I>SocketN</I></CODE> is bound to the number of the socket used. </P><P> The value <CODE><I>X</I></CODE> is exported immediately. An exception is raised, if exportation of <CODE><I>X</I></CODE> fails, because <CODE><I>X</I></CODE> might refer to sited entities. </P><P> The socket remains valid until the current Oz process terminates. </P></DD><DT><A name="label11"></A><SPAN class="index"><CODE>offerUnlimitedOn</CODE></SPAN> <A name="label12"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>{SocketConnection<SPAN class="keyword">.</SPAN>offerUnlimitedOn&nbsp;</CODE><CODE><I>X</I></CODE><CODE>&nbsp;</CODE><CODE><I>SocketN</I></CODE><CODE>}</CODE> </P></BLOCKQUOTE></DD><DD><P>Opens the socket <CODE><I>SocketN</I></CODE> (an integer) under which the value <CODE><I>X</I></CODE> is offered many times. </P><P> The value <CODE><I>X</I></CODE> is exported immediately. An exception is raised, if exportation of <CODE><I>X</I></CODE> fails, because <CODE><I>X</I></CODE> refers to sited entities. </P><P> Raises an exception if the socket <CODE><I>SocketN</I></CODE> is already in use. </P><P> The socket remains valid until the current Oz process terminates. </P></DD></DL><P> </P><P> Gates are provided as instances of the class <A name="label13"></A><SPAN class="index"><CODE>SocketConnection<SPAN class="keyword">.</SPAN>gate</CODE></SPAN>. The methods of <CODE>SocketConnection<SPAN class="keyword">.</SPAN>gate</CODE> are as follows. </P><P> </P><DL><DT><A name="label14"></A><SPAN class="index"><CODE>init</CODE></SPAN> <A name="label15"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>init(</CODE><CODE><I>X</I></CODE><CODE>)</CODE> </P></BLOCKQUOTE></DD><DD><P>Opens a random free socket under which the value <CODE><I>X</I></CODE> is offered many times. </P><P> The value <CODE><I>X</I></CODE> is exported immediately. An exception is raised, if exportation of <CODE><I>X</I></CODE> fails, because <CODE><I>X</I></CODE> might refer to sited entities. </P></DD><DT><A name="label16"></A><SPAN class="index"><CODE>initOn</CODE></SPAN> <A name="label17"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>initOn(</CODE><CODE><I>X</I></CODE><CODE>&nbsp;</CODE><CODE><I>SocketN</I></CODE><CODE>)</CODE> </P></BLOCKQUOTE></DD><DD><P>Opens the socket <CODE><I>SocketN</I></CODE> (an integer) under which the value <CODE><I>X</I></CODE> is offered many times. </P><P> The value <CODE><I>X</I></CODE> is exported immediately. An exception is raised, if exportation of <CODE><I>X</I></CODE> fails, because <CODE><I>X</I></CODE> might refer to sited entities. </P><P> Raises an exception if the socket <CODE><I>SocketN</I></CODE> is already in use. </P></DD><DT><A name="label18"></A><SPAN class="index"><CODE>getIP</CODE></SPAN> <A name="label19"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>getIP(</CODE><CODE>?<I>IP</I></CODE><CODE>)</CODE> </P></BLOCKQUOTE></DD><DD><P>Returns the public IP of the computer with this gate as a virtual string. </P></DD><DT><A name="label20"></A><SPAN class="index"><CODE>getPN</CODE></SPAN> <A name="label21"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>getPN(</CODE><CODE>?<I>SocketN</I></CODE><CODE>)</CODE> </P></BLOCKQUOTE></DD><DD><P>Returns the socket number used by the gate. </P></DD><DT><A name="label22"></A><SPAN class="index"><CODE>close</CODE></SPAN> <A name="label23"></A> </DT><DD><BLOCKQUOTE class="synopsis"><P><CODE>close()</CODE> </P></BLOCKQUOTE></DD><DD><P>Closes the gate and its socket, which makes further use of the associated socket illegal. </P></DD></DL><P> </P></DIV></DIV><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="index.html">- Up -</A></TD><TD><A href="node2.html#chapter.iport">Next &gt;&gt;</A></TD></TR></TABLE><HR><ADDRESS>Donatien Grolaux<BR><SPAN class="version">Version 1.2.3 (20020111)</SPAN></ADDRESS></BODY></HTML>
