<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>What was the interface for that functor again?</TITLE><LINK href="/home-1.1.0/doc/ozdoc.css" rel="stylesheet" type="text/css"></HEAD><BODY><H1 align="center" class="title">What was the interface for that functor again?</H1><H2 align="center" class="authors"><A href="http://www.sics.se/~nilsf">Nils&nbsp;Franzén</A> and&nbsp;<A href="http://www.sics.se/~andreas">Andreas&nbsp;Sundström</A></H2><BLOCKQUOTE><P>The aim of this software is to create interface descriptions for functors and show dependencies between functors. Produced interface descriptions can later be accessed in an easy way using a web-browser. </P><P class="margin"><A href="http://www.sics.se/~nilsf/mozart/mogul/packages/franzen-ozh-1.1.tgz">Download Software</A></P><P>Current version: 1.1 (06-Nov-2000), see <A href="index.html#chapter.changelog">change log</A> for more information.</P><P>Check out generated web-documents for <A href="http://www.sics.se/~nilsf/mozart/Tk">Tk and TkTools</A> and <A href="http://www.sics.se/~nilsf/mozart/Remote">Remote</A> </P></BLOCKQUOTE><HR><UL class="toc"><LI><A href="index.html#label1">1 Documenting tool for Mozart source code</A></LI><LI><A href="index.html#label2">2 Contributors</A></LI><LI><A href="index.html#label3">3 Documenting Interfaces</A><UL class="toc"><LI><A href="index.html#label4">3.1 Comments</A><UL class="toc"><LI><A href="index.html#label5">3.1.1 Problems with indentation in Emacs</A></LI></UL></LI><LI><A href="index.html#label6">3.2 Commenting arguments for methods and procedures</A><UL class="toc"><LI><A href="index.html#label7">3.2.1 More detailed commenting of arguments</A></LI></UL></LI></UL></LI><LI><A href="index.html#label8">4 How to use the tool</A><UL class="toc"><LI><A href="index.html#label9">4.1 Arguments</A></LI><LI><A href="index.html#label10">4.2 CVS option</A></LI></UL></LI><LI><A href="index.html#label11">5 Quick Introduction to the Web-Interface</A></LI><LI><A href="index.html#chapter.changelog">6 Change Log</A></LI></UL><HR><H1><A name="label1">1 Documenting tool for Mozart source code</A></H1><P>The idea is to give Mozart-developers a good tool to produce interface descriptions for functors. This tool takes a functor file as argument, follows all imported functors, and generates a number of navigable html pages. These html pages display the interfaces, (i.e. imports and exports) for the functors. One can easily jump between html pages describing the different functors with a single mouse-click. </P><H1><A name="label2">2 Contributors</A></H1><P></P><DL><DT><A href="http://www.sics.se/~erik/">Erik Klintskog</A></DT><DD><P>Provided the layout algortihm for functor map.</P></DD><DT><A href="http://www.ags.uni-sb.de/~afranke/">Andreas Franke</A></DT><DD><P>Provided fontify and general suggestions for improvments</P></DD><DT><A href="http://www.sics.se/~simon/">Simon Lindblom</A></DT><DD><P>Provided the cvs information extraction.</P></DD></DL><P> </P><H1><A name="label3">3 Documenting Interfaces</A></H1><P>The tool is able to read comments in mozart source files, which will be displayed in the generated html pages. One can comment the following entities in the program </P><UL><LI><P>The functor</P></LI><LI><P>Classes and procedures</P></LI><LI><P>Methods (in classes)</P></LI><LI><P>Arguments taken by methods or procedures</P></LI></UL><P> </P><H2><A name="label4">3.1 Comments</A></H2><P>Text comments has the form of </P><BLOCKQUOTE class="code"><CODE><SPAN class="comment">/**&nbsp;</SPAN></CODE><I>Comment</I><CODE><SPAN class="comment">&nbsp;*/</SPAN></CODE></BLOCKQUOTE><P> </P><P>The comments should be placed just before the entity that it should be associated with. White spaces and comments using &quot;<CODE><SPAN class="comment">%</SPAN></CODE>&quot; can be placed between the entity and the desired comment without any problem. </P><H3><A name="label5">3.1.1 Problems with indentation in Emacs</A></H3><P>When writing a comment that reaches over several lines, the indentation may be corrupt if you use keywords like <CODE><SPAN class="keyword">if</SPAN></CODE>, <CODE><SPAN class="keyword">or</SPAN></CODE>, etc. This is not a problem of <CODE>ozh</CODE>, rather the elisp that handles indentation. But changing the elisp to not to indent on keywords found in <CODE><SPAN class="comment">/**&nbsp;...&nbsp;*/</SPAN></CODE>-comments takes a lot of work and the result may be that the indentation process will become to slow (and in practice is useless). To solve this problem, <CODE>ozh</CODE> provides a small fix. All <CODE><SPAN class="comment">%</SPAN></CODE>s that start a line in a comment will not be displayed. Eventual spaces and tabs before the first <CODE><SPAN class="comment">%</SPAN></CODE> is also removed. For example you can write: </P><BLOCKQUOTE class="code"><CODE><SPAN class="comment">/**&nbsp;&nbsp;<BR>%&nbsp;if&nbsp;class&nbsp;or...<BR>*/</SPAN></CODE></BLOCKQUOTE><P> and the output will look like </P><P> <CODE>if class or...</CODE> </P><P>and your mozart source can still be indented correctly in emacs. </P><H2><A name="label6">3.2 Commenting arguments for methods and procedures</A></H2><P>Brief commenting of arguments is done by using </P><BLOCKQUOTE class="code"><CODE><SPAN class="keyword">@</SPAN></CODE><I>X</I><CODE>=</CODE><I>Value</I></BLOCKQUOTE><P> </P><P>where <I>X</I> is the position of the argument and <I>Value</I> is a string, which don't contains any whitespaces. For procedures <I>X</I> is a value between 1 and the arity of the procedure. For methods <I>X</I> is one of the features in the method-head. </P><P>Examples of commenting arguments in method-heads </P><BLOCKQUOTE class="code"><CODE><SPAN class="keyword">meth</SPAN>&nbsp;<SPAN class="functionname">new</SPAN>(One&nbsp;Two&nbsp;object:Foo)<BR>&nbsp;&nbsp;&nbsp;Foo={New&nbsp;One&nbsp;Two}<BR><SPAN class="keyword">end</SPAN></CODE></BLOCKQUOTE><P> </P><P>We describe the arguments in the following way </P><BLOCKQUOTE class="code"><CODE><SPAN class="comment">%%&nbsp;This&nbsp;comment&nbsp;will&nbsp;not&nbsp;appear&nbsp;in&nbsp;the&nbsp;generated&nbsp;html-pages<BR>/**&nbsp;Creates&nbsp;a&nbsp;new&nbsp;instance&nbsp;of&nbsp;Class&nbsp;*/</SPAN>&nbsp;<BR><SPAN class="comment">%%&nbsp;@1=Class&nbsp;@2=Init&nbsp;@object=?Object<BR></SPAN><SPAN class="keyword">meth</SPAN>&nbsp;<SPAN class="functionname">new</SPAN>(One&nbsp;Two&nbsp;object:Foo)<BR>&nbsp;&nbsp;&nbsp;Foo={New&nbsp;One&nbsp;Two}<BR><SPAN class="keyword">end</SPAN></CODE></BLOCKQUOTE><P> </P><P>Will generate the following output </P><UL><LI><P><CODE>new(Class&nbsp;Init&nbsp;object:?Object)<BR>Creates&nbsp;a&nbsp;new&nbsp;instance&nbsp;<SPAN class="keyword">of</SPAN>&nbsp;Class</CODE></P></LI></UL><P> </P><H3><A name="label7">3.2.1 More detailed commenting of arguments</A></H3><P>Detailed commenting of arguments is done by </P><BLOCKQUOTE class="code"><CODE><SPAN class="keyword">@</SPAN>arg&nbsp;</CODE><I>X</I><CODE>&nbsp;</CODE><I>Name</I><CODE>&nbsp;</CODE><I>Description</I></BLOCKQUOTE><P> <I>X</I> is used in the same way as in brief commenting, the <I>Name</I> is the variable name and the <I>Description</I> is a text string that explains the argument. The description must be inside <CODE><SPAN class="comment">/**&nbsp;...&nbsp;*/</SPAN></CODE> and will be removed from the displayed comment. Each description must end with new-line. </P><H1><A name="label8">4 How to use the tool</A></H1><P>The tool is named <CODE>ozh</CODE><A href="index.html#label12"><SUP>1</SUP></A> takes one input file and an output directory </P><BLOCKQUOTE class="code"><CODE>ozh&nbsp;</CODE><I>RootFunctor.oz</I><CODE>&nbsp;<SPAN class="keyword">-</SPAN>o&nbsp;</CODE><I>Directory</I></BLOCKQUOTE><P> </P><P>The program parses the source file <I>RootFunctor</I> and follows (when possible) all imported functors. </P><H2><A name="label9">4.1 Arguments</A></H2><P><CODE>ozh</CODE> takes the following command-line arguments </P><TABLE align="center" bgcolor="#f0f0e0"><TR valign="top"><TH><P>Option</P></TH><TH><P>Alias</P></TH><TH><P>State</P></TH><TH><P>Description</P></TH></TR><TR valign="top"><TD><P>--out=<I>Dir</I></P></TD><TD><P>-o <I>Dir</I></P></TD><TD class="ignore"><P>-</P></TD><TD><P>Specify Destination directory</P></TD></TR><TR valign="top"><TD><P>--path=<I>Dir</I></P></TD><TD><P>-P <I>Dir</I></P></TD><TD class="ignore"><P>-</P></TD><TD><P>Alternative search path</P></TD></TR><TR valign="top"><TD><P>--define=<I>Name</I></P></TD><TD><P>-D <I>Name</I></P></TD><TD class="ignore"><P>-</P></TD><TD><P>Define macro name <I>NAME</I></P></TD></TR><TR valign="top"><TD><P>--stylesheet=<I>URL</I></P></TD><TD><P>-s <I>URL</I></P></TD><TD class="ignore"><P>-</P></TD><TD><P>Use this stylesheet instead (overrides --copy)</P></TD></TR><TR valign="top"><TD><P>--(no)copy</P></TD><TD class="ignore"><P>-</P></TD><TD><P>true</P></TD><TD><P>Copy default stylesheet to output directory</P></TD></TR><TR valign="top"><TD><P>--(no)index</P></TD><TD class="ignore"><P>-</P></TD><TD><P>true</P></TD><TD><P>Create index file</P></TD></TR><TR valign="top"><TD><P>--(no)args</P></TD><TD class="ignore"><P>-</P></TD><TD><P>true</P></TD><TD><P>Keep the name of the arguments in procedures and methods</P></TD></TR><TR valign="top"><TD><P>--(no)map</P></TD><TD class="ignore"><P>-</P></TD><TD><P>false</P></TD><TD><P>Show relations between functors<A href="index.html#label13"><SUP>2</SUP></A>, can be saved as postscript.</P></TD></TR><TR valign="top"><TD><P>--mapignore=<I>Functor</I></P></TD><TD><P>-I <I>Functor</I></P></TD><TD class="ignore"><P>-</P></TD><TD><P>Ignore <I>Functor</I> when creating map</P></TD></TR><TR valign="top"><TD><P>--(no)cvs</P></TD><TD class="ignore"><P>-</P></TD><TD><P>false</P></TD><TD><P>Parse CVS-information from header of file.</P></TD></TR><TR valign="top"><TD><P>--(no)all</P></TD><TD class="ignore"><P>-</P></TD><TD><P>false</P></TD><TD><P>Show all entities in the functor.</P></TD></TR><TR valign="top"><TD><P>--(no)fontify</P></TD><TD class="ignore"><P>-</P></TD><TD><P>false</P></TD><TD><P>Generate pretty print versions of the source code.</P></TD></TR></TABLE><P> </P><H2><A name="label10">4.2 CVS option</A></H2><P>The <CODE>--cvs</CODE> option extracts CVS related information (author, date and version) from the file. This information will be displayed on top of the generated html-page for that functor. </P><H1><A name="label11">5 Quick Introduction to the Web-Interface</A></H1><P><IMG alt="" src="ozh.gif"> </P><DIV id="chapter.changelog"><H1><A name="chapter.changelog">6 Change Log</A></H1><P>06-Nov-2000: Today is my last day at SICS, so this is probably my last release of ozh. Some small bugfixes (as usual) and a new functor map layout algorithm contributed by Erik Klintskog. </P><P>29-Mar-2000: Some small bugfixes. Added --all and --fontify options. The fontify is contributed by Andreas Franke. </P><P>06-Mar-2000: Bugfix in resolving class inheritance. </P><P>09-Dec-1999: Bugfix in resolving relative paths. </P><P>02-Dec-1999: A lot of small bugfixes. Can specify several source roots. Can specify paths where to search for functors. </P><P>24-Nov-1999: New for this release is the possibility to see the inheritance structure and an inheritance-free representation of the class. Some bugfixes. </P><P>28-Sep-1999: New for this release is that it is possible to define macro names and some small bugfixes. </P></DIV><HR align="left" width="30%"><DIV class="footnote"><A name="label12">1. </A>Since <CODE>ozd</CODE> is already taken by the oz debugger, I had to find some other name. The &quot;h&quot; in <CODE>ozh</CODE> stands for html</DIV><DIV class="footnote"><A name="label13">2. </A>This one is very simple</DIV><HR><ADDRESS><A href="http://www.sics.se/~nilsf">Nils&nbsp;Franzén</A> and&nbsp;<A href="http://www.sics.se/~andreas">Andreas&nbsp;Sundström</A><BR><SPAN class="version">Version 1.1.1 (20001127)</SPAN></ADDRESS></BODY></HTML>
